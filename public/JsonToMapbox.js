!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?module.exports=l():"function"==typeof define&&define.amd?define(l):e.JsonToMapbox=l()}(this,(function(){"use strict";function e(e){let l=1;return e.forEach(e=>{e.Symbols.length>l&&(l=e.Symbols.length)}),l}function l(e,l,i){let t=[0];return e.forEach(e=>{"[object Object]"==Object.prototype.toString.call(e[l])&&e[l].Value.forEach(e=>{t.push(e.Scale)})}),t=[...new Set(t)].sort((e,l)=>e-l),t=t.map(t=>{let a=[];return e.forEach(e=>{if("[object Object]"==Object.prototype.toString.call(e[l])){let o=e[l].Value.length;e[l].Value.some((n,c)=>n.Scale>=t?("unique"==i?a.push({Value:e.Value,Size:n.Value}):a.push({Min:e.Min,Max:e.Max,Size:n.Value}),!0):c==o-1&&n.Scale<t?("unique"==i?a.push({Value:e.Value,Size:e[l].Value[c].Value}):a.push({Min:e.Min,Max:e.Max,Size:e[l].Value[c].Value}),!0):void 0)}else"unique"==i?a.push({Value:e.Value,Size:e[l]}):a.push({Min:e.Min,Max:e.Max,Size:e[l]})}),{Zoom:t,Values:a}}),t}function i(e,l,i){return e.map((e,t)=>{let a=[];return l.forEach(e=>{e.Symbols.length>t&&e.Symbols[t].Visible&&("unique"==i?a.push({...e.Symbols[t],Value:e.Value}):a.push({...e.Symbols[t],Min:e.Min,Max:e.Max}))}),a})}function t(e){let l=[];return"[object Object]"==Object.prototype.toString.call(e)&&"step"==e.Mode&&e.Value.forEach(e=>{l=l.concat([e.Scale,e.Value])}),["step",["zoom"],0,...l]}return function(a,o,n,c=""){let r=[],p=function(e){let l=e.Field;return""==l||null==l?[]:[{type:"symbol",paint:{"text-opacity":e.Color.Opacity,"text-color":e.Color.Hex,"text-halo-color":e.OutlineColor.Hex,"text-halo-width":e.OutlineWidth,"text-halo-blur":e.Blur},layout:{"symbol-placement":e.Layout?e.Layout:"point","text-allow-overlap":e.Overlap,"text-field":["get",l],"text-font":[e.Font.Family],"text-size":e.Font.Size,"text-anchor":e.Position?e.Position.Anchor:e.BaseLine,"text-rotate":e.Position?e.Position.Angle:0,"text-offset":[e.XOffset,e.YOffset]},minzoom:e.Scale.Min||0,maxzoom:e.Scale.Max||24}]}(a.Label),s=function(a,o,n){switch(o+"-"+n){case"point-simple":return function(e){let l=[];return e.forEach(e=>{e.Visible&&("vector"==e.Type?l.push({type:"circle",paint:{"circle-radius":"[object Number]"==Object.prototype.toString.call(e.Size)?e.Size:"interpolate"==e.Size.Mode?{stops:e.Size.Value.map(e=>[e.Scale,e.Value])}:t(e.Size),"circle-color":e.Color.Hex,"circle-opacity":e.Color.Opacity,"circle-blur":e.Blur,"circle-translate":[e.XOffset,e.YOffset],"circle-stroke-width":"[object Number]"==Object.prototype.toString.call(e.OutlineWidth)?e.OutlineWidth:"interpolate"==e.OutlineWidth.Mode?{stops:e.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(e.OutlineWidth),"circle-stroke-color":e.OutlineColor.Hex,"circle-stroke-opacity":e.OutlineColor.Opacity},layout:{}}):l.push({type:"symbol",layout:{"icon-image":e.Icon.Name,"icon-size":"[object Number]"==Object.prototype.toString.call(e.Scale)?e.Scale:"interpolate"==e.Scale.Mode?{stops:e.Scale.Value.map(e=>[e.Scale,e.Value])}:t(e.Scale),"icon-offset":[e.XOffset,e.YOffset],"icon-allow-overlap":!0,"icon-rotate":e.Rotate},paint:{"icon-opacity":e.Opacity}}))}),l}(a);case"point-unique":return function(a){let o=[],n=[],c=[],r=[];a.List.forEach(e=>{e.Value?(c.push(e),r.push(e.Value)):n.push(e)}),n.length>0&&n[0].Symbols.forEach(e=>{e.Visible&&("vector"==e.Type?o.push({type:"circle",paint:{"circle-radius":"[object Number]"==Object.prototype.toString.call(e.Size)?e.Size:"interpolate"==e.Size.Mode?{stops:e.Size.Value.map(e=>[e.Scale,e.Value])}:t(e.Size),"circle-color":e.Color.Hex,"circle-opacity":e.Color.Opacity,"circle-blur":e.Blur,"circle-translate":[e.XOffset,e.YOffset],"circle-stroke-width":"[object Number]"==Object.prototype.toString.call(e.OutlineWidth)?e.OutlineWidth:"interpolate"==e.OutlineWidth.Mode?{stops:e.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(e.OutlineWidth),"circle-stroke-color":e.OutlineColor.Hex,"circle-stroke-opacity":e.OutlineColor.Opacity},layout:{},filter:["!in",a.Field,...r]}):o.push({type:"symbol",layout:{"icon-image":e.Icon.Name,"icon-size":"[object Number]"==Object.prototype.toString.call(e.Scale)?e.Scale:"interpolate"==e.Scale.Mode?{stops:e.Scale.Value.map(e=>[e.Scale,e.Value])}:t(e.Scale),"icon-offset":[e.XOffset,e.YOffset],"icon-allow-overlap":!0,"icon-rotate":e.Rotate},paint:{"icon-opacity":e.Opacity},filter:["!in",a.Field,...r]}))});let p=e(c),s=new Array(p).fill([]),u=[],h=[];return s=i(s,c,"unique"),s.forEach(e=>{if(u=[],h=[],e.forEach(e=>{"vector"==e.Type?u.push(e):h.push(e)}),u.length>0){let e=[],i=l(u,"Size","unique"),t=l(u,"OutlineWidth","unique"),n={"circle-radius":[],"circle-color":[],"circle-opacity":[],"circle-blur":[],"circle-translate":[],"circle-stroke-width":[],"circle-stroke-color":[],"circle-stroke-opacity":[]};u.forEach(l=>{n["circle-color"]=n["circle-color"].concat([["==",["get",a.Field],l.Value],l.Color.Hex]),n["circle-opacity"]=n["circle-opacity"].concat([["==",["get",a.Field],l.Value],l.Color.Opacity]),n["circle-blur"]=n["circle-blur"].concat([["==",["get",a.Field],l.Value],l.Blur]),n["circle-translate"]=n["circle-translate"].concat([["==",["get",a.Field],l.Value],["literal",[l.XOffset,l.YOffset]]]),n["circle-stroke-color"]=n["circle-stroke-color"].concat([["==",["get",a.Field],l.Value],l.OutlineColor.Hex]),n["circle-stroke-opacity"]=n["circle-stroke-opacity"].concat([["==",["get",a.Field],l.Value],l.OutlineColor.Opacity]),e.push(l.Value)}),i.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),n["circle-radius"]=n["circle-radius"].concat([e.Zoom,["case",...l,14]])}),t.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),n["circle-stroke-width"]=n["circle-stroke-width"].concat([e.Zoom,["case",...l,1]])}),o.push({type:"circle",paint:{"circle-radius":["interpolate",["linear"],["zoom"],...n["circle-radius"]],"circle-color":["case",...n["circle-color"],"#000000"],"circle-opacity":["case",...n["circle-opacity"],1],"circle-blur":["case",...n["circle-blur"],0],"circle-stroke-width":["interpolate",["linear"],["zoom"],...n["circle-stroke-width"]],"circle-stroke-color":["case",...n["circle-stroke-color"],"#000000"],"circle-stroke-opacity":["case",...n["circle-stroke-opacity"],1]},layout:{},filter:["in",a.Field,...e]})}if(h.length>0){let e={"icon-image":[],"icon-size":[],"icon-offset":[],"icon-rotate":[],"icon-opacity":[]},l=[];h.forEach(i=>{e["icon-image"]=e["icon-image"].concat([["==",["get",a.Field],i.Value],i.Icon.Name]),e["icon-size"]=e["icon-size"].concat([["==",["get",a.Field],i.Value],i.Scale]),e["icon-offset"]=e["icon-offset"].concat([["==",["get",a.Field],i.Value],["literal",[i.XOffset,i.YOffset]]]),e["icon-rotate"]=e["icon-rotate"].concat([["==",["get",a.Field],i.Value],i.Rotate]),e["icon-opacity"]=e["icon-opacity"].concat([["==",["get",a.Field],i.Value],i.Opacity]),l.push(i.Value)}),o.push({type:"symbol",layout:{"icon-image":["case",...e["icon-image"],""],"icon-size":["case",...e["icon-size"],1],"icon-allow-overlap":!0,"icon-rotate":["case",...e["icon-rotate"],0]},paint:{"icon-opacity":["case",...e["icon-opacity"],1]},filter:["in",a.Field,...l]})}}),o}(a);case"point-range":return function(a){let o=[];if("linear"==a.Mode)o.push({type:"circle",paint:{"circle-radius":"[object Number]"==Object.prototype.toString.call(a.Size)?a.Size:"interpolate"==a.Size.Mode?{stops:a.Size.Value.map(e=>[e.Scale,e.Value])}:t(a.Size),"circle-color":["interpolate",["linear"],["get",a.Field],a.MinValue,a.Colors.Hexs[0],a.MaxValue,a.Colors.Hexs[1]],"circle-opacity":a.Colors.Opacity,"circle-blur":a.Blur,"circle-translate":[a.XOffset,a.YOffset],"circle-stroke-width":"[object Number]"==Object.prototype.toString.call(a.OutlineWidth)?a.OutlineWidth:"interpolate"==a.OutlineWidth.Mode?{stops:a.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(a.OutlineWidth),"circle-stroke-color":a.OutlineColor.Hex,"circle-stroke-opacity":a.OutlineColor.Opacity},layout:{}});else{let t=e(a.List),n=new Array(t).fill([]),c=[],r=[];n=i(n,a.List,"range"),n.forEach(e=>{if(c=[],r=[],e.forEach(e=>{"vector"==e.Type?c.push(e):r.push(e)}),c.length>0){let e=l(c,"Size","range"),i=l(c,"OutlineWidth","range"),t={"circle-radius":[],"circle-color":[],"circle-opacity":[],"circle-blur":[],"circle-translate":[],"circle-stroke-width":[],"circle-stroke-color":[],"circle-stroke-opacity":[]};c.forEach(e=>{t["circle-color"]=t["circle-color"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Color.Hex]),t["circle-opacity"]=t["circle-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Color.Opacity]),t["circle-blur"]=t["circle-blur"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Blur]),t["circle-translate"]=t["circle-translate"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",[e.XOffset,e.YOffset]]]),t["circle-stroke-color"]=t["circle-stroke-color"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.OutlineColor.Hex]),t["circle-stroke-opacity"]=t["circle-stroke-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.OutlineColor.Opacity])}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),t["circle-radius"]=t["circle-radius"].concat([e.Zoom,["case",...l,14]])}),i.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),t["circle-stroke-width"]=t["circle-stroke-width"].concat([e.Zoom,["case",...l,1]])}),o.push({type:"circle",paint:{"circle-radius":["interpolate",["linear"],["zoom"],...t["circle-radius"]],"circle-color":["case",...t["circle-color"],"#000000"],"circle-opacity":["case",...t["circle-opacity"],1],"circle-blur":["case",...t["circle-blur"],0],"circle-stroke-width":["interpolate",["linear"],["zoom"],...t["circle-stroke-width"]],"circle-stroke-color":["case",...t["circle-stroke-color"],"#000000"],"circle-stroke-opacity":["case",...t["circle-stroke-opacity"],1]},layout:{}})}if(r.length>0){let e={"icon-image":[],"icon-size":[],"icon-offset":[],"icon-rotate":[],"icon-opacity":[]};r.forEach(l=>{e["icon-image"]=e["icon-image"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Icon.Name]),e["icon-size"]=e["icon-size"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Scale]),e["icon-offset"]=e["icon-offset"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],["literal",[l.XOffset,l.YOffset]]]),e["icon-rotate"]=e["icon-rotate"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Rotate]),e["icon-opacity"]=e["icon-opacity"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Opacity])}),o.push({type:"symbol",layout:{"icon-image":["case",...e["icon-image"],""],"icon-size":["case",...e["icon-size"],1],"icon-allow-overlap":!0,"icon-rotate":["case",...e["icon-rotate"],0]},paint:{"icon-opacity":["case",...e["icon-opacity"],1]}})}})}return o}(a);case"point-grade":return function(t){let a=[],o=e(t.List),n=new Array(o).fill([]),c=[],r=[];return n=i(n,t.List,"grade"),n.forEach(e=>{if(c=[],r=[],e.forEach(e=>{"vector"==e.Type?c.push(e):r.push(e)}),c.length>0){let e=l(c,"OutlineWidth","grade"),i={"circle-radius":[],"circle-color":[],"circle-opacity":[],"circle-blur":[],"circle-translate":[],"circle-stroke-width":[],"circle-stroke-color":[],"circle-stroke-opacity":[]};c.forEach(e=>{i["circle-color"]=i["circle-color"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.Color.Hex]),i["circle-opacity"]=i["circle-opacity"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.Color.Opacity]),i["circle-blur"]=i["circle-blur"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.Blur]),i["circle-translate"]=i["circle-translate"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],["literal",[e.XOffset,e.YOffset]]]),i["circle-stroke-color"]=i["circle-stroke-color"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.OutlineColor.Hex]),i["circle-stroke-opacity"]=i["circle-stroke-opacity"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.OutlineColor.Opacity]),i["circle-radius"]=i["circle-radius"].concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.Size])}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",t.Field],e.Min],["<",["get",t.Field],e.Max]],e.Size])}),i["circle-stroke-width"]=i["circle-stroke-width"].concat([e.Zoom,["case",...l,1]])}),a.push({type:"circle",paint:{"circle-radius":["case",...i["circle-radius"],0],"circle-color":["case",...i["circle-color"],"#000000"],"circle-opacity":["case",...i["circle-opacity"],1],"circle-blur":["case",...i["circle-blur"],0],"circle-stroke-width":["interpolate",["linear"],["zoom"],...i["circle-stroke-width"]],"circle-stroke-color":["case",...i["circle-stroke-color"],"#000000"],"circle-stroke-opacity":["case",...i["circle-stroke-opacity"],1]},layout:{}})}if(r.length>0){let e={"icon-image":[],"icon-size":[],"icon-offset":[],"icon-rotate":[],"icon-opacity":[]};r.forEach(l=>{e["icon-image"]=e["icon-image"].concat([["all",[">=",["get",t.Field],l.Min],["<",["get",t.Field],l.Max]],l.Icon.Name]),e["icon-size"]=e["icon-size"].concat([["all",[">=",["get",t.Field],l.Min],["<",["get",t.Field],l.Max]],Number((l.Scale/20).toFixed(2))]),e["icon-offset"]=e["icon-offset"].concat([["all",[">=",["get",t.Field],l.Min],["<",["get",t.Field],l.Max]],["literal",[l.XOffset,l.YOffset]]]),e["icon-rotate"]=e["icon-rotate"].concat([["all",[">=",["get",t.Field],l.Min],["<",["get",t.Field],l.Max]],l.Rotate]),e["icon-opacity"]=e["icon-opacity"].concat([["all",[">=",["get",t.Field],l.Min],["<",["get",t.Field],l.Max]],l.Opacity])}),a.push({type:"symbol",layout:{"icon-image":["case",...e["icon-image"],""],"icon-size":["case",...e["icon-size"],1],"icon-allow-overlap":!0,"icon-rotate":["case",...e["icon-rotate"],0]},paint:{"icon-opacity":["case",...e["icon-opacity"],1]}})}}),a}(a);case"point-heat":return function(e){let l=[],i=e.Field,t=e.Colors.Hexs,a=t.length,o=[0,"rgba(33, 102, 172, 0)"];t.forEach((e,l)=>{o.push(Number(((l+1)/a).toFixed(2))),o.push(e)}),i?l.push({type:"heatmap",paint:{"heatmap-weight":["interpolate",["linear"],["get",i],e.MinValue,0,e.MaxValue,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],...o],"heatmap-radius":e.Radius,"heatmap-opacity":e.Colors.Opacity}}):l.push({type:"heatmap",paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],...o],"heatmap-radius":e.Radius,"heatmap-opacity":e.Colors.Opacity}});return l}(a);case"line-simple":return function(e){let l,i=[];return e.forEach(e=>{e.Visible&&("vector"==e.Type?(l={type:"line",paint:{"line-color":e.Color.Hex,"line-opacity":e.Color.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(e.Width)?e.Width:"interpolate"==e.Width.Mode?{stops:e.Width.Value.map(e=>[e.Scale,e.Value])}:t(e.Width),"line-blur":e.Blur},layout:{"line-cap":e.Endpoint,"line-join":e.Connect}},"dash"==e.Style&&(l.paint["line-dasharray"]=e.Dashes),i.push(l)):(l={type:"line",paint:{"line-pattern":e.Icon.Name,"line-width":"[object Number]"==Object.prototype.toString.call(e.Width)?e.Width:"interpolate"==e.Width.Mode?{stops:e.Width.Value.map(e=>[e.Scale,e.Value])}:t(e.Width),"line-blur":e.Blur,"line-opacity":e.Opacity||1},layout:{"line-cap":e.Endpoint,"line-join":e.Connect}},"dash"==e.Style&&(l.paint["line-dasharray"]=e.Dashes),i.push(l)))}),i}(a);case"line-unique":return function(a){let o,n=[],c=[],r=[],p=[];a.List.forEach(e=>{e.Value?(r.push(e),p.push(e.Value)):c.push(e)}),c.length>0&&c[0].Symbols.forEach(e=>{e.Visible&&("vector"==e.Type?(o={type:"line",paint:{"line-color":e.Color.Hex,"line-opacity":e.Color.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(e.Width)?e.Width:"interpolate"==e.Width.Mode?{stops:e.Width.Value.map(e=>[e.Scale,e.Value])}:t(e.Width),"line-blur":e.Blur},layout:{"line-cap":e.Endpoint,"line-join":e.Connect},filter:["!in",a.Field,...p]},n.push(o)):(o={type:"line",paint:{"line-pattern":e.Icon.Name,"line-width":"[object Number]"==Object.prototype.toString.call(e.Width)?e.Width:"interpolate"==e.Width.Mode?{stops:e.Width.Value.map(e=>[e.Scale,e.Value])}:t(e.Width),"line-blur":e.Blur,"line-opacity":e.Opacity},layout:{"line-cap":e.Endpoint,"line-join":e.Connect},filter:["!in",a.Field,...p]},n.push(o)))});let s=e(r),u=new Array(s).fill([]),h=[],y=[];return u=i(u,r,"unique"),u.forEach(e=>{if(h=[],y=[],e.forEach(e=>{"vector"==e.Type?h.push(e):y.push(e)}),h.length>0){let e=[],i=l(h,"Width","unique"),t={paint:{"line-color":[],"line-opacity":[],"line-width":[],"line-blur":[]},layout:{"line-cap":[],"line-join":[]}};h.forEach(l=>{t.paint["line-color"]=t.paint["line-color"].concat([["==",["get",a.Field],l.Value],l.Color.Hex]),t.paint["line-opacity"]=t.paint["line-opacity"].concat([["==",["get",a.Field],l.Value],l.Color.Opacity]),t.paint["line-blur"]=t.paint["line-blur"].concat([["==",["get",a.Field],l.Value],l.Blur]),t.layout["line-cap"]=t.layout["line-cap"].concat([["==",["get",a.Field],l.Value],l.Endpoint]),t.layout["line-join"]=t.layout["line-join"].concat([["==",["get",a.Field],l.Value],l.Connect]),"dash"==l.Style&&(t.paint["line-dasharray"]?t.paint["line-dasharray"]=t.paint["line-dasharray"].concat([["==",["get",a.Field],l.Value],["literal",l.Dashes]]):t.paint["line-dasharray"]=[["==",["get",a.Field],l.Value],["literal",l.Dashes]]),e.push(l.Value)}),i.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),t.paint["line-width"]=t.paint["line-width"].concat([e.Zoom,["case",...l,2]])});let o={type:"line",paint:{"line-color":["case",...t.paint["line-color"],"#000000"],"line-opacity":["case",...t.paint["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...t.paint["line-width"]],"line-blur":["case",...t.paint["line-blur"],0]},layout:{"line-join":["case",...t.layout["line-join"],"miter"]},filter:["in",a.Field,...e]};n.push(o)}if(y.length>0){let e=l(y,"Width","unique"),i={paint:{"line-pattern":[],"line-width":[],"line-blur":[],"line-opacity":[]},layout:{"line-cap":[],"line-join":[]}},t=[];y.forEach(e=>{i.paint["line-pattern"]=i.paint["line-pattern"].concat([["==",["get",a.Field],e.Value],e.Icon.Name]),i.paint["line-blur"]=i.paint["line-blur"].concat([["==",["get",a.Field],e.Value],e.Blur]),i.paint["line-opacity"]=i.paint["line-opacity"].concat([["==",["get",a.Field],e.Value],e.Opacity]),i.layout["line-cap"]=i.layout["line-cap"].concat([["==",["get",a.Field],e.Value],e.Endpoint]),i.layout["line-join"]=i.layout["line-join"].concat([["==",["get",a.Field],e.Value],e.Connect]),"dash"==e.Style&&(i.paint["line-dasharray"]?i.paint["line-dasharray"]=i.paint["line-dasharray"].concat([["==",["get",a.Field],e.Value],["literal",e.Dashes]]):i.paint["line-dasharray"]=[["==",["get",a.Field],e.Value],["literal",e.Dashes]]),t.push(e.Value)}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),i.paint["line-width"]=i.paint["line-width"].concat([e.Zoom,["case",...l,2]])});let o={type:"line",paint:{"line-pattern":["case",...i.paint["line-pattern"],""],"line-width":["interpolate",["linear"],["zoom"],...i.paint["line-width"]],"line-blur":["case",...i.paint["line-blur"],0],"line-opacity":["case",...i.paint["line-opacity"],1]},layout:{"line-join":["case",...i.layout["line-join"],"miter"]},filter:["in",a.Field,...t]};n.push(o)}}),n}(a);case"line-range":return function(a){let o=[];if("linear"==a.Mode){let e={type:"line",paint:{"line-color":["interpolate",["linear"],["get",a.Field],a.MinValue,a.Colors.Hexs[0],a.MaxValue,a.Colors.Hexs[1]],"line-opacity":a.Colors.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(a.Width)?a.Width:"interpolate"==a.Width.Mode?{stops:a.Width.Value.map(e=>[e.Scale,e.Value])}:t(a.Width),"line-blur":a.Blur},layout:{"line-cap":a.Endpoint,"line-join":a.Connect}};"dash"==a.Style&&(e.paint["line-dasharray"]=a.Dashes),o.push(e)}else{let t=e(a.List),n=new Array(t).fill([]),c=[],r=[];n=i(n,a.List,"range"),n.forEach(e=>{if(c=[],r=[],e.forEach(e=>{"vector"==e.Type?c.push(e):r.push(e)}),c.length>0){let e=l(c,"Width","range"),i={paint:{"line-color":[],"line-opacity":[],"line-width":[],"line-blur":[]},layout:{"line-cap":[],"line-join":[]}};c.forEach(e=>{i.paint["line-color"]=i.paint["line-color"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Color.Hex]),i.paint["line-opacity"]=i.paint["line-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Color.Opacity]),i.paint["line-blur"]=i.paint["line-blur"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Blur]),i.layout["line-cap"]=i.layout["line-cap"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Endpoint]),i.layout["line-join"]=i.layout["line-join"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Connect]),"dash"==e.Style&&(i.paint["line-dasharray"]?i.paint["line-dasharray"]=i.paint["line-dasharray"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.Dashes]]):i.paint["line-dasharray"]=[["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.Dashes]])}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),i.paint["line-width"]=i.paint["line-width"].concat([e.Zoom,["case",...l,2]])});let t={type:"line",paint:{"line-color":["case",...i.paint["line-color"],"#000000"],"line-opacity":["case",...i.paint["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...i.paint["line-width"]],"line-blur":["case",...i.paint["line-blur"],0]},layout:{"line-join":["case",...i.layout["line-join"],"miter"]}};o.push(t)}if(r.length>0){let e=l(r,"Width","range"),i={paint:{"line-pattern":[],"line-width":[],"line-blur":[],"line-opacity":[]},layout:{"line-cap":[],"line-join":[]}};r.forEach(e=>{i.paint["line-pattern"]=i.paint["line-pattern"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Icon.Name]),i.paint["line-blur"]=i.paint["line-blur"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Blur]),i.paint["line-opacity"]=i.paint["line-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Opacity]),i.layout["line-cap"]=i.layout["line-cap"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Endpoint]),i.layout["line-join"]=i.layout["line-join"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Connect]),"dash"==e.Style&&(i.paint["line-dasharray"]?i.paint["line-dasharray"]=i.paint["line-dasharray"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.Dashes]]):i.paint["line-dasharray"]=[["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.Dashes]])}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),i.paint["line-width"]=i.paint["line-width"].concat([e.Zoom,["case",...l,2]])});let t={type:"line",paint:{"line-pattern":["case",...i.paint["line-pattern"],""],"line-width":["interpolate",["linear"],["zoom"],...i.paint["line-width"]],"line-blur":["case",...i.paint["line-blur"],0],"line-opacity":["case",...i.paint["line-opacity"],1]},layout:{"line-join":["case",...i.layout["line-join"],"miter"]}};o.push(t)}})}return o}(a);case"polygon-simple":return function(e){let l=[];return e.forEach(e=>{if(e.Visible){"vector"==e.Type?l.push({type:"fill",paint:{"fill-color":e.Color.Hex,"fill-opacity":e.Color.Opacity},layout:{}}):l.push({type:"fill",paint:{"fill-pattern":e.Icon.Name,"fill-opacity":e.Opacity},layout:{}});let i={type:"line",paint:{"line-color":e.OutlineColor.Hex,"line-opacity":e.OutlineColor.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(e.OutlineWidth)?e.OutlineWidth:"interpolate"==e.OutlineWidth.Mode?{stops:e.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(e.OutlineWidth)},layout:{}};"dash"==e.OutlineStyle&&(i.paint["line-dasharray"]=e.OutlineDashes),l.push(i)}}),l}(a);case"polygon-unique":return function(a){let o=[],n=[],c=[],r=[];a.List.forEach(e=>{e.Value?(c.push(e),r.push(e.Value)):n.push(e)}),n.length>0&&n[0].Symbols.forEach(e=>{if(e.Visible){"vector"==e.Type?o.push({type:"fill",paint:{"fill-color":e.Color.Hex,"fill-opacity":e.Color.Opacity},layout:{},filter:["!in",a.Field,...r]}):o.push({type:"fill",paint:{"fill-pattern":e.Icon.Name,"fill-opacity":e.Opacity},layout:{},filter:["!in",a.Field,...r]});let l={type:"line",paint:{"line-color":e.OutlineColor.Hex,"line-opacity":e.OutlineColor.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(e.OutlineWidth)?e.OutlineWidth:"interpolate"==e.OutlineWidth.Mode?{stops:e.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(e.OutlineWidth)},layout:{},filter:["!in",a.Field,...r]};"dash"==e.OutlineStyle&&(l.paint["line-dasharray"]=e.OutlineDashes),o.push(l)}});let p=e(c),s=new Array(p).fill([]),u=[],h=[];return s=i(s,c,"unique"),s.forEach(e=>{if(u=[],h=[],e.forEach(e=>{"vector"==e.Type?u.push(e):h.push(e)}),u.length>0){let e=[],i=l(u,"OutlineWidth","unique"),t={fill:{"fill-color":[],"fill-opacity":[]},line:{"line-color":[],"line-opacity":[],"line-width":[]}};u.forEach(l=>{t.fill["fill-color"]=t.fill["fill-color"].concat([["==",["get",a.Field],l.Value],l.Color.Hex]),t.fill["fill-opacity"]=t.fill["fill-opacity"].concat([["==",["get",a.Field],l.Value],l.Color.Opacity]),t.line["line-color"]=t.line["line-color"].concat([["==",["get",a.Field],l.Value],l.OutlineColor.Hex]),t.line["line-opacity"]=t.line["line-opacity"].concat([["==",["get",a.Field],l.Value],l.OutlineColor.Opacity]),"dash"==l.OutlineStyle&&(t.line["line-dasharray"]?t.line["line-dasharray"]=t.line["line-dasharray"].concat([["==",["get",a.Field],l.Value],["literal",l.OutlineDashes]]):t.line["line-dasharray"]=[["==",["get",a.Field],l.Value],["literal",l.OutlineDashes]]),e.push(l.Value)}),i.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),t.line["line-width"]=t.line["line-width"].concat([e.Zoom,["case",...l,1]])});let n={type:"fill",paint:{"fill-color":["case",...t.fill["fill-color"],"#000000"],"fill-opacity":["case",...t.fill["fill-opacity"],1]},layout:{},filter:["in",a.Field,...e]};o.push(n);let c={type:"line",paint:{"line-color":["case",...t.line["line-color"],"#000000"],"line-opacity":["case",...t.line["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...t.line["line-width"]]},layout:{},filter:["in",a.Field,...e]};o.push(c)}if(h.length>0){let e=l(h,"OutlineWidth","unique"),i={fill:{"fill-pattern":[],"fill-opacity":[]},line:{"line-color":[],"line-opacity":[],"line-width":[]}},t=[];h.forEach(e=>{i.fill["fill-pattern"]=i.fill["fill-pattern"].concat([["==",["get",a.Field],e.Value],e.Icon.Name]),i.fill["fill-opacity"]=i.fill["fill-opacity"].concat([["==",["get",a.Field],e.Value],e.Opacity]),i.line["line-color"]=i.line["line-color"].concat([["==",["get",a.Field],e.Value],e.OutlineColor.Hex]),i.line["line-opacity"]=i.line["line-opacity"].concat([["==",["get",a.Field],e.Value],e.OutlineColor.Opacity]),"dash"==e.OutlineStyle&&(i.line["line-dasharray"]?i.line["line-dasharray"]=i.line["line-dasharray"].concat([["==",["get",a.Field],e.Value],["literal",e.OutlineDashes]]):i.line["line-dasharray"]=[["==",["get",a.Field],e.Value],["literal",e.OutlineDashes]]),t.push(e.Value)}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["==",["get",a.Field],e.Value],e.Size])}),i.line["line-width"]=i.line["line-width"].concat([e.Zoom,["case",...l,1]])});let n={type:"fill",paint:{"fill-pattern":["case",...i.fill["fill-pattern"],""],"fill-opacity":["case",...i.fill["fill-opacity"],1]},layout:{},filter:["in",a.Field,...t]};o.push(n);let c={type:"line",paint:{"line-color":["case",...i.line["line-color"],"#000000"],"line-opacity":["case",...i.line["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...i.line["line-width"]]},layout:{},filter:["in",a.Field,...t]};o.push(c)}}),o}(a);case"polygon-range":return function(a){let o=[];if("linear"==a.Mode){o.push({type:"fill",paint:{"fill-color":["interpolate",["linear"],["get",a.Field],a.MinValue,a.Colors.Hexs[0],a.MaxValue,a.Colors.Hexs[1]],"fill-opacity":a.Colors.Opacity},layout:{}});let e={type:"line",paint:{"line-color":a.OutlineColor.Hex,"line-opacity":a.OutlineColor.Opacity,"line-width":"[object Number]"==Object.prototype.toString.call(a.OutlineWidth)?a.OutlineWidth:"interpolate"==a.OutlineWidth.Mode?{stops:a.OutlineWidth.Value.map(e=>[e.Scale,e.Value])}:t(a.OutlineWidth)},layout:{}};"dash"==a.OutlineStyle&&(e.paint["line-dasharray"]=a.OutlineDashes),o.push(e)}else{let t=e(a.List),n=new Array(t).fill([]),c=[],r=[];n=i(n,a.List,"range"),n.forEach(e=>{if(c=[],r=[],e.forEach(e=>{"vector"==e.Type?c.push(e):r.push(e)}),c.length>0){let e=[],i=l(c,"OutlineWidth","range"),t={fill:{"fill-color":[],"fill-opacity":[]},line:{"line-color":[],"line-opacity":[],"line-width":[]}};c.forEach(l=>{t.fill["fill-color"]=t.fill["fill-color"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Color.Hex]),t.fill["fill-opacity"]=t.fill["fill-opacity"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.Color.Opacity]),t.line["line-color"]=t.line["line-color"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.OutlineColor.Hex]),t.line["line-opacity"]=t.line["line-opacity"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],l.OutlineColor.Opacity]),"dash"==l.OutlineStyle&&(t.line["line-dasharray"]?t.line["line-dasharray"]=t.line["line-dasharray"].concat([["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],["literal",l.OutlineDashes]]):t.line["line-dasharray"]=[["all",[">=",["get",a.Field],l.Min],["<",["get",a.Field],l.Max]],["literal",l.OutlineDashes]]),e.push(l.Value)}),i.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),t.line["line-width"]=t.line["line-width"].concat([e.Zoom,["case",...l,1]])});let n={type:"fill",paint:{"fill-color":["case",...t.fill["fill-color"],"#000000"],"fill-opacity":["case",...t.fill["fill-opacity"],1]},layout:{}};o.push(n);let r={type:"line",paint:{"line-color":["case",...t.line["line-color"],"#000000"],"line-opacity":["case",...t.line["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...t.line["line-width"]]},layout:{}};o.push(r)}if(r.length>0){let e=l(r,"OutlineWidth","range"),i={fill:{"fill-pattern":[],"fill-opacity":[]},line:{"line-color":[],"line-opacity":[],"line-width":[]}},t=[];r.forEach(e=>{i.fill["fill-pattern"]=i.fill["fill-pattern"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Icon.Name]),i.fill["fill-opacity"]=i.fill["fill-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Opacity]),i.line["line-color"]=i.line["line-color"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.OutlineColor.Hex]),i.line["line-opacity"]=i.line["line-opacity"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.OutlineColor.Opacity]),"dash"==e.OutlineStyle&&(i.line["line-dasharray"]?i.line["line-dasharray"]=i.line["line-dasharray"].concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.OutlineDashes]]):i.line["line-dasharray"]=[["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],["literal",e.OutlineDashes]]),t.push(e.Value)}),e.forEach(e=>{let l=[];e.Values.forEach(e=>{l=l.concat([["all",[">=",["get",a.Field],e.Min],["<",["get",a.Field],e.Max]],e.Size])}),i.line["line-width"]=i.line["line-width"].concat([e.Zoom,["case",...l,1]])});let n={type:"fill",paint:{"fill-pattern":["case",...i.fill["fill-pattern"],""],"fill-opacity":["case",...i.fill["fill-opacity"],1]},layout:{}};o.push(n);let c={type:"line",paint:{"line-color":["case",...i.line["line-color"],"#000000"],"line-opacity":["case",...i.line["line-opacity"],1],"line-width":["interpolate",["linear"],["zoom"],...i.line["line-width"]]},layout:{}};o.push(c)}})}return o}(a);default:return[]}}(a.Style,a.Type,a.Mode);return function(e,l){let i=[],t=[],a=l.Scale.Min,o=l.Scale.Max;if(Object.prototype.hasOwnProperty.call(e,"Scale")){let l=0,n=0;i=e.Scale.map(e=>{let i=[];return Object.prototype.hasOwnProperty.call(e.Filter,"LogicalOperator")?i.push("And"==e.Filter.LogicalOperator?"all":"Or"==e.Filter.LogicalOperator?"any":"none"):i.push("all"),Object.prototype.hasOwnProperty.call(e.Filter,"Rule")&&e.Filter.Rule.forEach(e=>{"PropertyIsEqualTo"==e.ComparisonOperator?i.push(["==",e.PropertyName,e.Literal]):"PropertyIsNotEqualTo"==e.ComparisonOperator?i.push(["!=",e.PropertyName,e.Literal]):"PropertyIsLessThan"==e.ComparisonOperator?i.push(["<",e.PropertyName,e.Literal]):"PropertyIsGreaterThan"==e.ComparisonOperator?i.push([">",e.PropertyName,e.Literal]):"PropertyIsLessThanOrEqualTo"==e.ComparisonOperator?i.push(["<=",e.PropertyName,e.Literal]):"PropertyIsGreaterThanOrEqualTo"==e.ComparisonOperator?i.push([">=",e.PropertyName,e.Literal]):"PropertyIsNull"==e.ComparisonOperator&&i.push(["!has",e.PropertyName])}),e.Min<l&&(l=e.Min),e.Max>n&&(n=e.Max),{minzoom:e.Min,maxzoom:e.Max,filter:i}}),n<o&&i.push({minzoom:n,maxzoom:o,filter:["all"]}),l>a&&i.unshift({minzoom:a,maxzoom:l,filter:["all"]}),i.some(e=>{if(e.minzoom>=a){if(!(e.maxzoom<=o))return t.push({minzoom:e.minzoom,maxzoom:o,filter:e.filter}),!0;t.push({minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter})}else{if(!(e.maxzoom<=o))return t.push({minzoom:a,maxzoom:o,filter:e.filter}),!0;t.push({minzoom:a,maxzoom:e.maxzoom,filter:e.filter})}})}else if(Object.prototype.hasOwnProperty.call(e,"Attribute")){let l=[];Object.prototype.hasOwnProperty.call(e.Attribute,"LogicalOperator")?l.push("And"==e.Attribute.LogicalOperator?"all":"Or"==e.Attribute.LogicalOperator?"any":"none"):l.push("all"),Object.prototype.hasOwnProperty.call(e.Attribute,"Rule")&&e.Attribute.Rule.forEach(e=>{"PropertyIsEqualTo"==e.ComparisonOperator?l.push(["==",e.PropertyName,e.Literal]):"PropertyIsNotEqualTo"==e.ComparisonOperator?l.push(["!=",e.PropertyName,e.Literal]):"PropertyIsLessThan"==e.ComparisonOperator?l.push(["<",e.PropertyName,e.Literal]):"PropertyIsGreaterThan"==e.ComparisonOperator?l.push([">",e.PropertyName,e.Literal]):"PropertyIsLessThanOrEqualTo"==e.ComparisonOperator?l.push(["<=",e.PropertyName,e.Literal]):"PropertyIsGreaterThanOrEqualTo"==e.ComparisonOperator?l.push([">=",e.PropertyName,e.Literal]):"PropertyIsNull"==e.ComparisonOperator&&l.push(["!has",e.PropertyName])}),t.push({minzoom:a,maxzoom:o,filter:l})}else t.push({minzoom:a,maxzoom:o,filter:["all"]});return t=t.filter(e=>e.minzoom<e.maxzoom),t}(a.Filter,a.Others).forEach((e,l)=>{s.forEach((i,t)=>{""==c?r.push({...i,id:o+"_"+l+"_"+t,source:n,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:Object.prototype.hasOwnProperty.call(i,"filter")?["all",i.filter,e.filter]:e.filter}):r.push({...i,id:o+"_"+l+"_"+t,source:n,"source-layer":c,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:Object.prototype.hasOwnProperty.call(i,"filter")?["all",i.filter,e.filter]:e.filter})}),p.forEach((i,t)=>{i.minzoom<=e.maxzoom&&(""==c?r.push({...i,id:o+"_label_"+l+"_"+t,source:n,minzoom:i.minzoom<e.minzoom?e.minzoom:i.minzoom,maxzoom:i.maxzoom<e.maxzoom?i.maxzoom:e.maxzoom,filter:Object.prototype.hasOwnProperty.call(i,"filter")?["all",i.filter,e.filter]:e.filter}):r.push({...i,id:o+"_label_"+l+"_"+t,source:n,"source-layer":c,minzoom:i.minzoom<e.minzoom?e.minzoom:i.minzoom,maxzoom:i.maxzoom<e.maxzoom?i.maxzoom:e.maxzoom,filter:Object.prototype.hasOwnProperty.call(i,"filter")?["all",i.filter,e.filter]:e.filter}))})}),r}}));
//# sourceMappingURL=JsonToMapbox.js.map
